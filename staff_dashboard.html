    <!DOCTYPE html>
<html lang="en">

<head>
    <title>Staff Dashboard - Helpdesk</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, 
            #ffd200, #f7971e);
            min-height: 100vh;
        }

        .navbar {
            background: #f7971e;
        }

        .card {
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }

        .fade-in {
            animation: fadeIn 1s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(40px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .sidebar {
            min-width: 220px;
            background: #fffbe6;
            border-radius: 12px;
            padding: 24px 12px;
            height: 100%;
        }



        .profile-label {
            font-weight: bold;
        }

        .logout-btn {
            position: absolute;
            right: 32px;
            top: 24px;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark position-relative">
        <div class="container-fluid">
            <a class="navbar-brand" href="home.html">Helpdesk</a>
            <div class="ms-auto">
                <span class="navbar-text">Welcome, Staff</span>
                <button class="btn btn-outline-info ms-2" id="profileBtn">ðŸ‘¤ Profile</button>
                <button class="btn btn-danger ms-2" onclick="window.location.href='home.html'">Logout</button>
            </div>
        </div>
    </nav>
    <div class="container mt-5 fade-in">
        <div class="row justify-content-center">
            <div class="col-md-3">
                <div class="sidebar">
                    <h4 class="mb-3">Profile</h4>
                    <div id="profileInfo">
                        <div><span class="profile-label">Name:</span> <span id="staffName"></span></div>
                        <div><span class="profile-label">Department:</span> <span id="staffDept"></span></div>
                        <div><span class="profile-label">Phone:</span> <span id="staffPhone"></span></div>
                        <div><span class="profile-label">Mail:</span> <span id="staffMail"></span></div>
                    </div>
                    <button id="changePasswordBtn" class="btn btn-warning mt-3">Change Password</button>
                    <div id="changePasswordSection" style="display:none;">
                        <form id="changePasswordForm" class="mt-3">
                            <input type="password" class="form-control mb-2" name="newPassword"
                                placeholder="New Password" required>
                            <button class="btn btn-success w-100">Update Password</button>
                        </form>
                    </div>
                    <hr>
                    <button id="showNewTickets" class="btn btn-primary">New Tickets</button>
                    <button id="showPendingTickets" class="btn btn-warning mt-3">Pending Tickets</button>
                    <button id="showSolvedTickets" class="btn btn-success">Solved Tickets</button>
                    
                </div>
            </div>
            <div class="col-md-7">
                <div class="card p-4">
                    <h3 id="ticketSectionTitle">All Tickets</h3>
                    <ul id="allTickets" class="list-group"></ul>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Load staff profile from localStorage (simulate logged-in staff)
        function loadStaffProfile() {
            let staffList = JSON.parse(localStorage.getItem('helpdesk_staff') || '[]');
            // For demo, use the first staff member
            let staff = staffList[0] || { staffName: 'Staff', department: 'Dept', phone: 'N/A', mail: 'N/A' };
            document.getElementById('staffName').textContent = staff.staffName || '';
            document.getElementById('staffDept').textContent = staff.department || '';
            document.getElementById('staffPhone').textContent = staff.phone || '';
            document.getElementById('staffMail').textContent = staff.mail || '';
        }
        function renderTickets(filter) {
            let tickets = JSON.parse(localStorage.getItem('helpdesk_tickets') || '[]');
            const list = document.getElementById('allTickets');
            list.innerHTML = '';
            let filtered = tickets;
            if (filter === 'NEW') filtered = tickets.filter(t => t.status === 'OPEN');
            if (filter === 'PENDING') filtered = tickets.filter(t => t.status === 'OPEN'); // For demo, treat OPEN as pending
            if (filter === 'SOLVED') filtered = tickets.filter(t => t.status === 'SOLVED');
            filtered.forEach((t, idx) => {
                const li = document.createElement('li');
                li.className = 'list-group-item d-flex justify-content-between align-items-center';
                li.innerHTML = `${t.name}: ${t.issue} <span class="badge bg-${t.status === 'OPEN' ? 'warning' : 'success'}">${t.status}</span>`;

                const btnContainer = document.createElement('div');
                btnContainer.className = 'd-flex';

                if (t.status === 'OPEN') {
                    const btn = document.createElement('button');
                    btn.className = 'btn btn-success btn-sm me-2';
                    btn.textContent = 'Mark as Solved';
                    btn.onclick = function () {
                        tickets[idx].status = 'SOLVED';
                        localStorage.setItem('helpdesk_tickets', JSON.stringify(tickets));
                        renderTickets(filter);
                    };
                    btnContainer.appendChild(btn);
                }

                const viewBtn = document.createElement('button');
                viewBtn.className = 'btn btn-outline-info btn-sm me-2';
                viewBtn.textContent = 'View';
                viewBtn.onclick = function () {
                    alert(`Ticket Details:\nName: ${t.name}\nIssue: ${t.issue}\nStatus: ${t.status}\nDate: ${t.dateTime}`);
                };
                btnContainer.appendChild(viewBtn);

                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'btn btn-danger btn-sm';
                deleteBtn.textContent = 'Delete';
                deleteBtn.onclick = function () {
                    if (confirm('Are you sure you want to delete this ticket?')) {
                        tickets.splice(idx, 1);
                        localStorage.setItem('helpdesk_tickets', JSON.stringify(tickets));
                        renderTickets(filter);
                    }
                };
                btnContainer.appendChild(deleteBtn);

                li.appendChild(btnContainer);
                list.appendChild(li);
            });
        }
        window.onload = function () {
            loadStaffProfile();
            renderTickets();
        };
        document.getElementById('showNewTickets').onclick = function () {
            document.getElementById('ticketSectionTitle').textContent = 'New Tickets';
            renderTickets('NEW');
        };
        document.getElementById('showPendingTickets').onclick = function () {
            document.getElementById('ticketSectionTitle').textContent = 'Pending Tickets';
            renderTickets('PENDING');
        };
        document.getElementById('showSolvedTickets').onclick = function () {
            document.getElementById('ticketSectionTitle').textContent = 'Solved Tickets';
            renderTickets('SOLVED');
        };
        document.getElementById('changePasswordBtn').onclick = function () {
            document.getElementById('changePasswordSection').style.display = 'block';
        };
        document.getElementById('changePasswordForm').onsubmit = function (e) {
            e.preventDefault();
            let staffList = JSON.parse(localStorage.getItem('helpdesk_staff') || '[]');
            // For demo, update first staff member
            let staff = staffList[0];
            if (staff) {
                staff.password = e.target.newPassword.value;
                localStorage.setItem('helpdesk_staff', JSON.stringify(staffList));
                alert('Password updated!');
                document.getElementById('changePasswordSection').style.display = 'none';
            }
        };
        document.getElementById('profileBtn').onclick = function() {
            let staffList = JSON.parse(localStorage.getItem('helpdesk_staff') || '[]');
            let staff = staffList[0] || { staffName: 'Staff', department: 'Dept', phone: 'N/A', mail: 'N/A' };
            document.getElementById('profileModalBody').innerHTML = `
                <div><strong>Name:</strong> ${staff.staffName || ''}</div>
                <div><strong>Department:</strong> ${staff.department || ''}</div>
                <div><strong>Phone:</strong> ${staff.phone || ''}</div>
                <div><strong>Mail:</strong> ${staff.mail || ''}</div>
            `;
            let profileModal = new bootstrap.Modal(document.getElementById('profileModal'));
            profileModal.show();
        };
    </script>
    <!-- Profile Modal -->
    <div class="modal fade" id="profileModal" tabindex="-1" aria-labelledby="profileModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="profileModalLabel">Staff Profile</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="profileModalBody">
                    <!-- Profile content -->
                </div>
            </div>
        </div>
    </div>
</body>

</html>
